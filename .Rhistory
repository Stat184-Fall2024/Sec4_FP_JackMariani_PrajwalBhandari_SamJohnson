X4 = readr::parse_number(gsub("%", "", X4)),
X7 = readr::parse_number(gsub("%", "", X7)),
X10 = readr::parse_number(gsub("%", "", X10)),
year = 2020 # add year col
) %>%
rename(
state = X1,
total_votes = X2,
d_votes = X3,
d_percent = X4,
d_ev = X5,
r_votes = X6,
r_percent = X7,
r_ev = X8,
other_votes = X9,
other_percent = X10,
other_ev = X11,
year = year
) %>% # rearrange the order of cols
select(
year, state, total_votes,
d_votes, d_percent, d_ev,
r_votes, r_percent, r_ev,
other_votes, other_percent, other_ev
)
# remove maine and nebraska congressional rows. add EV to at large vote based on Party.
# nebraska
table[30,6] <- 1
table[30,9] <- 4
# maine
table[20,6] <- 3
table[20,9] <- 1
# remove cd rows for maine and nebraska
table <- table %>%
slice(-(21:22)) %>%
slice(-(29:31))
return(table)
}
# actual function to create the table:
create_clean_data <- function(){
# create empty data frame which we add our clean tables to
clean_data = data.frame()
# write a loop to do this
for (year in seq(1980, 2020, by = 4)) {
#1980, 1992,1996
if (year %in% c(1980,1992,1996)){
rbind(clean_data, clean_80_92_96(year))
}
# 1884
if (year %in% c(1984,1988)) {
rbind(clean_data, clean_84_88(year))
}
#2000
if (year == 2000) {
rbind(clean_data, clean_2000())
}
#2004
if (year == 2004) {
rbind(clean_data, clean_2004())
}
# 2008
if (year == 2008) {
rbind(clean_data, clean_2008())
}
if (year == 2012) {
rbind(clean_data, clean_2012())
}
# 2016
if (year == 2016) {
rbind(clean_data, clean_2016())
}
#2020
if (year == 2020) {
rbind(clean_data, clean_2020())
}
}
return(clean_data)
}
view(create_clean_data())
view(create_clean_data())
# actual function to create the table:
create_clean_data <- function(){
# create empty data frame which we add our clean tables to
clean_data <-  data.frame()
# write a loop to do this
for (year in seq(1980, 2020, by = 4)) {
#1980, 1992,1996
if (year %in% c(1980,1992,1996)){
rbind(clean_data, clean_80_92_96(year))
}
# 1884
if (year %in% c(1984,1988)) {
rbind(clean_data, clean_84_88(year))
}
#2000
if (year == 2000) {
rbind(clean_data, clean_2000())
}
#2004
if (year == 2004) {
rbind(clean_data, clean_2004())
}
# 2008
if (year == 2008) {
rbind(clean_data, clean_2008())
}
if (year == 2012) {
rbind(clean_data, clean_2012())
}
# 2016
if (year == 2016) {
rbind(clean_data, clean_2016())
}
#2020
if (year == 2020) {
rbind(clean_data, clean_2020())
}
}
return(clean_data)
}
view(create_clean_data())
View(clean_2008)
view(create_clean_data())
create_clean_data()
clean_data[1,] <- c(
'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',
)
# write a loop to do this
for (year in seq(1980, 2020, by = 4)) {
#1980, 1992,1996
if (year %in% c(1980,1992,1996)){
rbind(clean_data, clean_80_92_96(year))
}
# 1984, 1998
if (year %in% c(1984,1988)) {
rbind(clean_data, clean_84_88(year))
}
#2000
if (year == 2000) {
rbind(clean_data, clean_2000())
}
#2004
if (year == 2004) {
rbind(clean_data, clean_2004())
}
# 2008
if (year == 2008) {
rbind(clean_data, clean_2008())
}
if (year == 2012) {
rbind(clean_data, clean_2012())
}
# 2016
if (year == 2016) {
rbind(clean_data, clean_2016())
}
#2020
if (year == 2020) {
rbind(clean_data, clean_2020())
}
}
# actual function to create the table:
create_clean_data <- function(){
# create empty data frame which we add our clean tables to
clean_data <-  data.frame()
clean_data[1,] <- c(
'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',)
# write a loop to do this
for (year in seq(1980, 2020, by = 4)) {
#1980, 1992,1996
if (year %in% c(1980,1992,1996)){
rbind(clean_data, clean_80_92_96(year))
}
# 1984, 1998
if (year %in% c(1984,1988)) {
rbind(clean_data, clean_84_88(year))
}
#2000
if (year == 2000) {
rbind(clean_data, clean_2000())
}
#2004
if (year == 2004) {
rbind(clean_data, clean_2004())
}
# 2008
if (year == 2008) {
rbind(clean_data, clean_2008())
}
if (year == 2012) {
rbind(clean_data, clean_2012())
}
# 2016
if (year == 2016) {
rbind(clean_data, clean_2016())
}
#2020
if (year == 2020) {
rbind(clean_data, clean_2020())
}
}
return(clean_data)
}
view(create_clean_data())
clean_data[1,] <- c(
'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',)
clean_data[1,] <- c(
'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test')
# actual function to create the table:
create_clean_data <- function(){
# create empty data frame which we add our clean tables to
clean_data <-  data.frame()
clean_data[1,] <- c(
'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test',    'test')
# write a loop to do this
for (year in seq(1980, 2020, by = 4)) {
#1980, 1992,1996
if (year %in% c(1980,1992,1996)){
rbind(clean_data, clean_80_92_96(year))
}
# 1984, 1998
if (year %in% c(1984,1988)) {
rbind(clean_data, clean_84_88(year))
}
#2000
if (year == 2000) {
rbind(clean_data, clean_2000())
}
#2004
if (year == 2004) {
rbind(clean_data, clean_2004())
}
# 2008
if (year == 2008) {
rbind(clean_data, clean_2008())
}
if (year == 2012) {
rbind(clean_data, clean_2012())
}
# 2016
if (year == 2016) {
rbind(clean_data, clean_2016())
}
#2020
if (year == 2020) {
rbind(clean_data, clean_2020())
}
}
return(clean_data)
}
view(create_clean_data())
# actual function to create the table:
create_clean_data <- function(){
# create empty data frame which we add our clean tables to
clean_data <-  data.frame()
clean_data[1,] <- c(
1,2,3,4,5,6,7,8,9,10,11,12
)
# write a loop to do this
for (year in seq(1980, 2020, by = 4)) {
#1980, 1992,1996
if (year %in% c(1980,1992,1996)){
rbind(clean_data, clean_80_92_96(year))
}
# 1984, 1998
if (year %in% c(1984,1988)) {
rbind(clean_data, clean_84_88(year))
}
#2000
if (year == 2000) {
rbind(clean_data, clean_2000())
}
#2004
if (year == 2004) {
rbind(clean_data, clean_2004())
}
# 2008
if (year == 2008) {
rbind(clean_data, clean_2008())
}
if (year == 2012) {
rbind(clean_data, clean_2012())
}
# 2016
if (year == 2016) {
rbind(clean_data, clean_2016())
}
#2020
if (year == 2020) {
rbind(clean_data, clean_2020())
}
}
return(clean_data)
}
view(create_clean_data())
view(create_clean_data())
# actual function to create the table:
create_clean_data <- function(){
# create empty data frame which we add our clean tables to
clean_data <-  data.frame()
clean_data[1,] <- c(
1,2,3,4,5,6,7,8,9,10,11,12
)
print(clean_data)
# write a loop to do this
for (year in seq(1980, 2020, by = 4)) {
#1980, 1992,1996
if (year %in% c(1980,1992,1996)){
rbind(clean_data, clean_80_92_96(year))
}
# 1984, 1998
if (year %in% c(1984,1988)) {
rbind(clean_data, clean_84_88(year))
}
#2000
if (year == 2000) {
rbind(clean_data, clean_2000())
}
#2004
if (year == 2004) {
rbind(clean_data, clean_2004())
}
# 2008
if (year == 2008) {
rbind(clean_data, clean_2008())
}
if (year == 2012) {
rbind(clean_data, clean_2012())
}
# 2016
if (year == 2016) {
rbind(clean_data, clean_2016())
}
#2020
if (year == 2020) {
rbind(clean_data, clean_2020())
}
}
return(clean_data)
}
create_clean_data()
# actual function to create the table:
create_clean_data <- function(){
# create empty data frame which we add our clean tables to
clean_data <-  data.frame()
clean_data[1,] <- c(
1,2,3,4,5,6,7,8,9,10,11,12
)
print(clean_data)
# write a loop to do this
for (year in seq(1980, 2020, by = 4)) {
#1980, 1992,1996
if (year %in% c(1980,1992,1996)){
rbind(clean_data, clean_80_92_96(year))
}
# 1984, 1998
if (year %in% c(1984,1988)) {
rbind(clean_data, clean_84_88(year))
}
#2000
if (year == 2000) {
rbind(clean_data, clean_2000())
}
#2004
if (year == 2004) {
rbind(clean_data, clean_2004())
}
# 2008
if (year == 2008) {
rbind(clean_data, clean_2008())
}
if (year == 2012) {
rbind(clean_data, clean_2012())
}
# 2016
if (year == 2016) {
rbind(clean_data, clean_2016())
}
#2020
if (year == 2020) {
rbind(clean_data, clean_2020())
}
}
print(clean_data)
return(clean_data)
}
create_clean_data()
# actual function to create the table:
create_clean_data <- function(){
# create empty data frame which we add our clean tables to
clean_data <- data.frame()
print(clean_data)
# write a loop to do this
for (year in seq(1980, 2020, by = 4)) {
#1980, 1992,1996
if (year %in% c(1980,1992,1996)){
clean_data <- rbind(clean_data, clean_80_92_96(year))
}
# 1984, 1998
if (year %in% c(1984,1988)) {
clean_data <- rbind(clean_data, clean_84_88(year))
}
#2000
if (year == 2000) {
clean_data <- rbind(clean_data, clean_2000())
}
#2004
if (year == 2004) {
clean_data <- rbind(clean_data, clean_2004())
}
# 2008
if (year == 2008) {
clean_data <- rbind(clean_data, clean_2008())
}
if (year == 2012) {
clean_data <- rbind(clean_data, clean_2012())
}
# 2016
if (year == 2016) {
clean_data <- rbind(clean_data, clean_2016())
}
#2020
if (year == 2020) {
clean_data <- rbind(clean_data, clean_2020())
}
}
return(clean_data)
}
create_clean_data()
# actual function to create the table:
create_clean_data <- function(){
# create empty data frame which we add our clean tables to
clean_data <- data.frame()
# write a loop to do this
for (year in seq(1980, 2020, by = 4)) {
#1980, 1992,1996
if (year %in% c(1980,1992,1996)){
clean_data <- rbind(clean_data, clean_80_92_96(year))
}
# 1984, 1998
if (year %in% c(1984,1988)) {
clean_data <- rbind(clean_data, clean_84_88(year))
}
#2000
if (year == 2000) {
clean_data <- rbind(clean_data, clean_2000())
}
#2004
if (year == 2004) {
clean_data <- rbind(clean_data, clean_2004())
}
# 2008
if (year == 2008) {
clean_data <- rbind(clean_data, clean_2008())
}
if (year == 2012) {
clean_data <- rbind(clean_data, clean_2012())
}
# 2016
if (year == 2016) {
clean_data <- rbind(clean_data, clean_2016())
}
#2020
if (year == 2020) {
clean_data <- rbind(clean_data, clean_2020())
}
}
return(clean_data)
}
view(create_clean_data())
# now that we have the data in a tidy, clean and easy to work with format, we can start the analysis.
data <- create_clean_data()
data %>%
write_sheet(
ss =
gs4_get(
"https://docs.google.com/spreadsheets/d/1GT8UOmD4l2j88wCLfCAlh_R7r0jWCtsmoL84kVvDOlc/edit?usp=sharing"),
sheet = 'main'
)
library(googlesheets4)
data %>%
write_sheet(
ss =
gs4_get(
"https://docs.google.com/spreadsheets/d/1GT8UOmD4l2j88wCLfCAlh_R7r0jWCtsmoL84kVvDOlc/edit?usp=sharing"),
sheet = 'main'
)
data <- read_sheet(
ss = "https://docs.google.com/spreadsheets/d/1GT8UOmD4l2j88wCLfCAlh_R7r0jWCtsmoL84kVvDOlc/edit?usp=sharing"
)
data
ggplot(aes(x = year, total))
data %>%
group_by(year) %>%
summarize(
total = sum(total_votes)
) %>%
ggplot(aes(x = year, total))
data %>%
group_by(year) %>%
summarize(
total = sum(total_votes)
) %>%
ggplot(aes(x = year, total)) +
geom_point()
data %>%
group_by(year) %>%
summarize(
total = sum(total_votes)
) %>%
ggplot(aes(x = year, total)) +
geom_line()
